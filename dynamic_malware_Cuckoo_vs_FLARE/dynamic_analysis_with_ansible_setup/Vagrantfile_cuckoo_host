# Vagrantfile: Cuckoo Host (Ubuntu 22.04) + optional libvirt/qemu setup notes
# This Vagrantfile creates a single Ubuntu 22.04 VM to act as a Cuckoo host.
# After provisioning, run the Ansible playbook (in /ansible) from your host to complete installation.
Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/jammy64"
  config.vm.hostname = "cuckoo-host"
  config.vm.network "private_network", ip: "192.168.56.20"
  config.vm.provider "virtualbox" do |vb|
    vb.memory = 8192
    vb.cpus = 4
  end

  config.vm.provision "shell", inline: <<-SHELL
    sudo apt-get update -y
    sudo apt-get install -y python3 python3-venv python3-pip git curl unzip qemu-kvm libvirt-clients libvirt-daemon-system virtinst bridge-utils
    # Install Ansible on the host VM to run local playbook (or run from host machine)
    sudo apt-get install -y software-properties-common
    sudo apt-add-repository --yes --update ppa:ansible/ansible
    sudo apt-get install -y ansible
    echo "Cuckoo host base packages installed. Next run the ansible playbook from /vagrant/ansible or from host machine."
  SHELL

  # Sync the ansible directory from host to guest /vagrant/ansible
  config.vm.synced_folder "./ansible", "/vagrant/ansible"
end
